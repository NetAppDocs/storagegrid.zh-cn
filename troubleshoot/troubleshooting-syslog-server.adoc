---
permalink: troubleshoot/troubleshooting-syslog-server.html 
sidebar: sidebar 
keywords: how to troubleshoot the external syslog server 
summary: 下表介绍了可能与外部系统日志服务器相关的错误消息、并列出了更正操作。 
---
= 对外部系统日志服务器进行故障排除
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
下表介绍了可能与外部系统日志服务器相关的错误消息、并列出了更正操作。

有关将审核信息发送到外部系统日志服务器的详细信息、请参见：

* link:../monitor/considerations-for-external-syslog-server.html["使用外部系统日志服务器的注意事项"]
* link:../monitor/configure-audit-messages.html["配置审核消息和外部系统日志服务器"]


[cols="1a,3a"]
|===
| 错误消息 | 问题描述 和建议的操作 


 a| 
无法解析主机名
 a| 
您为系统日志服务器输入的 FQDN 无法解析为 IP 地址。

. 检查输入的主机名。如果输入了IP地址、请确保该地址是有效的IP地址、采用w.x.y.z ("点分十进制")表示法。
. 检查 DNS 服务器是否配置正确。
. 确认每个节点均可访问 DNS 服务器的 IP 地址。




 a| 
连接被拒绝
 a| 
拒绝与系统日志服务器建立 TCP 或 TLS 连接。可能没有服务在侦听主机的 TCP 或 TLS 端口，或者防火墙可能正在阻止访问。

. 检查您为系统日志服务器输入的 FQDN 或 IP 地址，端口和协议是否正确。
. 确认系统日志服务的主机正在运行侦听指定端口的系统日志守护进程。
. 确认防火墙不会阻止从节点到系统日志服务器的 IP 和端口的 TCP/TLS 连接访问。




 a| 
无法访问网络
 a| 
系统日志服务器不在直连子网上。路由器返回 ICMP 失败消息，指示它无法将测试消息从列出的节点转发到系统日志服务器。

. 检查您为系统日志服务器输入的 FQDN 或 IP 地址是否正确。
. 对于列出的每个节点，请检查网格网络子网列表，管理网络子网列表和客户端网络网关。确认这些配置已通过预期网络接口和网关（网格，管理员或客户端）将流量路由到系统日志服务器。




 a| 
无法访问主机
 a| 
系统日志服务器位于直连子网上（列出的节点用于其网格，管理员或客户端 IP 地址的子网）。节点尝试发送测试消息，但未收到对系统日志服务器 MAC 地址的 ARP 请求的响应。

. 检查您为系统日志服务器输入的 FQDN 或 IP 地址是否正确。
. 检查运行系统日志服务的主机是否已启动。




 a| 
连接超时
 a| 
已尝试进行 TCP/TLS 连接，但系统日志服务器长时间未收到任何响应。可能存在路由配置不当或防火墙在未发送任何响应的情况下丢弃流量（通用配置）。

. 检查您为系统日志服务器输入的 FQDN 或 IP 地址是否正确。
. 对于列出的每个节点，请检查网格网络子网列表，管理网络子网列表和客户端网络网关。确认已将这些端口配置为使用网络接口和网关(网格、管理或客户端)将流量路由到系统日志服务器、系统日志服务器将通过这些接口和网关访问。
. 确认防火墙未阻止从列出的节点到系统日志服务器的 IP 和端口访问 TCP/TLS 连接。




 a| 
配对节点已关闭连接
 a| 
已成功建立与系统日志服务器的 TCP 连接，但稍后关闭。原因可能包括：

* 系统日志服务器可能已重新启动或重新启动。
* 节点和系统日志服务器可能具有不同的 TCP/TLS 设置。
* 中间防火墙可能正在关闭闲置的 TCP 连接。
* 侦听系统日志服务器端口的非系统日志服务器可能已关闭连接。


要解决此问题描述，请执行以下操作：

. 检查您为系统日志服务器输入的 FQDN 或 IP 地址，端口和协议是否正确。
. 如果您使用的是 TLS ，请确认系统日志服务器也使用 TLS 。如果您使用的是 TCP ，请确认系统日志服务器也使用 TCP 。
. 检查中间防火墙是否未配置为关闭空闲 TCP 连接。




 a| 
TLS 证书错误
 a| 
从系统日志服务器收到的服务器证书与您提供的 CA 证书包和客户端证书不兼容。

. 确认 CA 证书包和客户端证书（如果有）与系统日志服务器上的服务器证书兼容。
. 确认系统日志服务器的服务器证书中的身份包含预期的 IP 或 FQDN 值。




 a| 
转发已暂停
 a| 
系统日志记录不再转发到系统日志服务器， StorageGRID 无法检测到原因。

查看随此错误提供的调试日志，尝试确定根发生原因 。



 a| 
TLS 会话已终止
 a| 
系统日志服务器已终止 TLS 会话， StorageGRID 无法检测到原因。

. 查看随此错误提供的调试日志，尝试确定根发生原因 。
. 检查您为系统日志服务器输入的 FQDN 或 IP 地址，端口和协议是否正确。
. 如果您使用的是 TLS ，请确认系统日志服务器也使用 TLS 。如果您使用的是 TCP ，请确认系统日志服务器也使用 TCP 。
. 确认 CA 证书包和客户端证书（如果有）与系统日志服务器的服务器证书兼容。
. 确认系统日志服务器的服务器证书中的身份包含预期的 IP 或 FQDN 值。




 a| 
结果查询失败
 a| 
用于系统日志服务器配置和测试的管理节点无法从列出的节点请求测试结果。一个或多个节点可能已关闭。

. 按照标准故障排除步骤操作，确保节点联机且所有预期服务均正在运行。
. 在列出的节点上重新启动 miscd 服务。


|===