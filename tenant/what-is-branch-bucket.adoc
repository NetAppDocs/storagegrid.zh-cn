---
permalink: tenant/what-is-branch-bucket.html 
sidebar: sidebar 
keywords: how to create branch bucket 
summary: 分支存储桶提供对存储桶中在特定时间存在的对象的访问。 
---
= 什么是分支桶？
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
分支存储桶提供对存储桶中在特定时间存在的对象的访问。

您可以从现有存储桶创建分支存储桶。创建分支存储桶后，创建该存储桶的原始存储桶称为_基本存储桶_。此外，您可以从另一个分支存储桶创建一个分支存储桶。

分支存储桶提供对受保护数据的访问，但不作为备份。要继续保护数据，请在基本存储桶上使用这些功能：

* link:../tenant/using-s3-object-lock.html["S3 对象锁定"]
* link:../admin/grid-federation-what-is-cross-grid-replication.html["跨网格复制"]用于基础桶
* link:../tenant/manage-bucket-policy.html["存储桶策略"]用于版本化存储桶，以清理旧对象版本


请注意分支桶的以下特征：

* 您可以使用以下方式访问分支存储桶中的对象link:../tenant/use-s3-console.html["S3 控制台下载对象"]。
* 当客户端访问分支存储桶中的对象时，该分支存储桶的link:../s3/use-access-policies.html["访问策略"]，而不是基本存储桶的策略，决定是否允许或拒绝访问。
* 在基础存储桶中创建的对象是根据link:../ilm/access-create-ilm-rule-wizard.html["ILM 规则"]适用于底部桶。根据 ILM 规则如何应用于分支存储桶来评估在分支存储桶中创建的对象。
* 分支存储桶不支持跨网格复制。
* 分支存储桶不支持平台服务。




== 分支存储桶使用示例

* 您可以使用分支存储桶来删除损坏的对象，方法是从损坏发生之前的时间点创建一个分支存储桶，然后将应用程序指向该分支存储桶而不是包含损坏对象的基本存储桶。
* 您正在将数据保存在版本控制的存储桶中。存在一个意外的漏洞，导致许多不需要的对象在时间_T_之后被摄取。您可以为之前时间值 _T_ 创建一个分支存储桶，并将客户端操作重定向到该分支存储桶。然后，只有早于时间 _T_ 摄取的对象才会暴露给客户端。




== 对分支存储桶中的对象进行操作

* 对分支存储桶执行 PUT 对象操作会在分支中创建一个对象。
* 对分支存储桶执行 GET 对象操作将从分支中检索对象。如果分支存储桶中不存在该对象，则从基本存储桶中检索该对象。
* 分支存储桶中的对象删除如下：
+
[cols="1a,1a,2a,2a,2a"]
|===
| 操作 | 目标 | 结果 | 基本存储桶中的对象可见性 | 分支存储桶中的对象可见性 


 a| 
删除没有版本 ID 的
 a| 
基础桶
 a| 
仅为基本存储桶创建删除标记
 a| 
HEAD/GET 返回对象不存在，但特定版本仍可访问
 a| 
HEAD/GET 返回对象存在，且特定版本仍可访问

删除标记将在分支存储桶之后创建 `beforeTime`。



 a| 
根据版本 ID 删除
 a| 
基础桶
 a| 
删除了基本存储桶和分支存储桶的特定对象版本
 a| 
HEAD/GET 返回对象版本不存在
 a| 
HEAD/GET 返回对象版本不存在



 a| 
删除没有版本 ID 的
 a| 
分支桶
 a| 
仅为分支存储桶创建删除标记
 a| 
HEAD/GET 返回对象（基本 bucket 对象不受影响）
 a| 
HEAD/GET 返回对象不存在



 a| 
根据版本 ID 删除
 a| 
分支桶
 a| 
仅删除分支存储桶的特定对象版本
 a| 
HEAD/GET 返回特定对象版本（基本存储桶对象不受影响）
 a| 
HEAD/GET 返回对象版本不存在

|===


另请参阅link:../ilm/how-objects-are-deleted.html#delete-s3-versioned-objects["如何删除受版本控制的 S3 对象"]。
