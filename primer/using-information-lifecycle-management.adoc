---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: '您可以使用信息生命周期管理\(ILM)控制StorageGRID 系统中所有对象的放置、持续时间和加载行为。ILM 规则可确定 StorageGRID 在一段时间内如何存储对象。您可以配置一个或多个 ILM 规则，然后将其添加到 ILM 策略中。' 
---
= 信息生命周期管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用信息生命周期管理 (ILM) 来控制StorageGRID系统中所有对象的放置、持续时间和摄取行为。 ILM 规则决定了StorageGRID如何随时间存储对象。您可以配置一个或多个 ILM 规则，然后将它们添加到 ILM 策略。一个网格可以同时具有多个活动策略。

ILM 规则定义：

* 应该存储哪些对象。规则可以应用于所有对象，或者您可以指定过滤器来确定规则适用于哪些对象。例如，规则只能应用于与特定租户帐户、特定 S3 存储桶或特定元数据值相关联的对象。
* 存储类型和位置。对象可以存储在存储节点或云存储池中。
* 创建的对象副本的类型。可以复制副本或对副本进行删除编码。
* 对于复制的副本，为创建的副本数。
* 对于纠删编码的副本、使用纠删编码方案。
* 对象的存储位置和副本类型会随时间发生变化。
* 在将对象载入网格时如何保护对象数据（同步放置或双提交）。


请注意，对象元数据不受 ILM 规则管理。而是将对象元数据存储在 Cassandra 数据库中，该数据库称为元数据存储。每个站点会自动维护三个对象元数据副本，以防止数据丢失。



== ILM 规则示例

例如、ILM规则可以指定以下内容：

* 仅应用于属于租户A的对象
* 为这些对象创建两个复制副本、并将每个副本存储在不同的站点上。
* 将这两个副本保留为"永久"、这意味着StorageGRID不会自动删除它们。相反， StorageGRID 将保留这些对象，直到客户端删除请求或存储分段生命周期到期时将其删除为止。
* 使用均衡选项进行加载行为：租户A将对象保存到StorageGRID 后立即应用双站点放置指令、除非无法立即创建两个所需的副本。
+
例如，如果租户 A 保存对象时无法访问站点 2 ，则 StorageGRID 将在站点 1 的存储节点上创建两个临时副本。一旦站点 2 可用， StorageGRID 就会在该站点创建所需的副本。





== ILM 策略如何评估对象

StorageGRID系统的活动ILM策略可控制所有对象的放置、持续时间和入射行为。

当客户端将对象保存到 StorageGRID 时，系统会根据活动策略中按顺序排列的一组 ILM 规则对这些对象进行评估，如下所示：

. 如果策略中第一个规则的筛选器与某个对象匹配，则会根据该规则的载入行为载入该对象，并根据该规则的放置说明进行存储。
. 如果第一个规则的筛选器与对象不匹配、则系统将根据策略中的每个后续规则评估对象、直到进行匹配为止。
. 如果没有与对象匹配的规则，则会应用策略中默认规则的载入行为和放置说明。默认规则是策略中的最后一个规则、不能使用任何筛选器。它必须应用于所有租户，所有分段和所有对象版本。




== ILM 策略示例

例如、一个ILM策略可以包含三个ILM规则、这些规则可指定以下内容：

* *规则1：为租户A*复制的副本
+
** 匹配属于租户A的所有对象
** 将这些对象作为三个复制副本存储在三个站点上。
** 规则1不匹配属于其他租户的对象、因此会根据规则2对其进行评估。


* *规则2：对大于1 MB*的对象进行纠删编码
+
** 匹配其他租户的所有对象、但前提是这些对象大于1 MB。这些较大的对象在三个站点上使用 6+3 纠删编码进行存储。
** 与小于或等于1 MB的对象不匹配、因此将根据规则3评估这些对象。


* *规则3：2个副本2个数据中心*(默认)
+
** 是策略中的最后一个默认规则。不使用筛选器。
** 为规则1或规则2不匹配的所有对象创建两个复制副本(不属于租户A且小于或等于1 MB的对象)。




image::../media/ilm_policy_and_rules.png[ILM 策略和规则]

.相关信息
* link:../ilm/index.html["使用 ILM 管理对象"]

