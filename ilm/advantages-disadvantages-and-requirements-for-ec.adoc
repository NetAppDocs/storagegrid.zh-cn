---
permalink: ilm/advantages-disadvantages-and-requirements-for-ec.html 
sidebar: sidebar 
keywords: erasure coding advantages, disadvantages, EC requirements 
summary: 在决定是使用复制还是纠删编码来保护对象数据不会丢失之前，您应了解纠删编码的优点，缺点和要求。 
---
= 纠删编码的优势，劣势和要求
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
在决定是使用复制还是纠删编码来保护对象数据不会丢失之前，您应了解纠删编码的优点，缺点和要求。



== 纠删编码的优势

与复制相比，纠删编码可提高可靠性，可用性和存储效率。

* *可靠性*：以在不丢失数据的情况下可以承受的同时故障次数来衡量。
+
** 复制：多个相同的对象副本存储在不同的节点和跨站点上。
** 擦除编码：将对象编码为数据和奇偶校验片段，并分布在许多节点和站点上。这种分散提供了站点和节点故障保护。


* *可用性*：当存储节点发生故障或无法访问时获取对象的能力。与复制相比，擦除编码在相当的存储成本下提供了更高的可用性。
* *存储效率*：在可用性和可靠性相似的情况下，擦除编码对象比复制对象占用更少的磁盘空间。例如，复制到两个站点的 10 MB 对象将消耗 20 MB 磁盘空间（两个副本），而使用 6+3 擦除编码方案在三个站点上进行擦除编码的对象仅消耗 15 MB 磁盘空间。
+

NOTE: 擦除编码对象的磁盘空间计算为对象大小加上存储开销。存储开销百分比是奇偶校验片段数除以数据片段数。





== 纠删编码的缺点

与复制相比，纠删编码具有以下缺点：

* 建议增加存储节点和站点的数量、具体取决于纠删编码方案。相比之下、如果复制对象数据、则每个副本只需要一个存储节点。请参阅link:what-erasure-coding-schemes-are.html#erasure-coding-schemes-for-storage-pools-containing-three-or-more-sites["包含三个或更多站点的存储池的纠删编码方案"]和link:what-erasure-coding-schemes-are.html#erasure-coding-schemes-for-one-site-storage-pools["单站点存储池的纠删编码方案"]。
* 存储扩展的成本和复杂性增加。要扩展使用复制的部署、您需要在创建对象副本的每个位置添加存储容量。要扩展使用纠删编码的部署，您必须同时考虑使用的纠删编码方案以及现有存储节点的容量。例如、如果您等待现有节点达到100%全满、则必须至少添加 `k+m`存储节点、但如果在现有节点达到70%全满时进行扩展、则可以为每个站点添加两个节点、同时仍可最大程度地提高可用存储容量。有关详细信息，请参见 link:../expand/adding-storage-capacity-for-erasure-coded-objects.html["为经过纠删编码的对象添加存储容量"]。
* 在分布在不同地理位置的站点之间使用纠删编码时，检索延迟会增加。通过WAN连接检索经过验证编码并分布在远程站点上的对象片段比复制并在本地可用的对象(客户端连接到的同一站点)所需时间更长。
* 在地理位置分散的站点之间使用纠删编码时，检索和修复的 WAN 网络流量使用率较高，尤其是频繁检索的对象或通过 WAN 网络连接进行对象修复。
* 当您跨站点使用擦除编码时，随着站点间网络延迟的增加，最大对象吞吐量会急剧下降。这种下降是由于 TCP 网络吞吐量下降造成的，这影响了StorageGRID系统存储和检索对象片段的速度。
* 提高计算资源的利用率。




== 何时使用纠删编码

使用擦除编码来满足以下要求：

* 大于 1 MB 的对象。
+

NOTE: 纠删编码最适合大于 1 MB 的对象。不要对小于200 KB的对象使用纠删编码、以避免管理非常小的经过纠删编码的片段所产生的开销。

* 长期或冷存储，用于存储不经常检索的内容。
* 高数据可用性和可靠性。
* 防止发生完整的站点和节点故障。
* 存储效率。
* 需要高效数据保护的单站点部署，只需一个纠删编码副本，而不是多个复制副本。
* 站点间延迟小于 100 毫秒的多站点部署。

