---
permalink: ilm/create-ilm-rule-enter-details.html 
sidebar: sidebar 
keywords: ILM rule step 1, define basics 
summary: '通过创建ILM规则向导的第1步\(输入详细信息\)、您可以输入规则的名称和问题描述 、并为规则定义筛选器。' 
---
= 第1步(共3步)：输入详细信息
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
通过创建ILM规则向导的*输入详细信息*步骤、您可以输入规则的名称和问题描述 、并为规则定义筛选器。

输入问题描述 并为规则定义筛选器是可选的。

.关于此任务
根据评估对象时link:what-ilm-rule-is.html["ILM规则"]，StorageGRID会将对象元数据与规则的筛选器进行比较。如果对象元数据与所有筛选器匹配， StorageGRID 将使用规则放置对象。您可以设计一个规则以应用于所有对象，也可以指定基本筛选器，例如一个或多个租户帐户或分段名称，或者指定高级筛选器，例如对象的大小或用户元数据。

.步骤
. 在 * 名称 * 字段中输入规则的唯一名称。
. 或者，也可以在 * 问题描述 * 字段中为此规则输入一个短问题描述 。
+
您应说明此规则的目的或功能，以便稍后识别此规则。

. (可选)选择一个或多个应用此规则的S3租户帐户。如果此规则为所有租户添加适用场景 ，请将此字段留空。
+
如果您既没有root访问权限、也没有租户帐户权限、则无法从列表中选择租户。而是输入租户 ID 或输入多个 ID 作为逗号分隔的字符串。

. (可选)指定此规则适用的S3分段。
+
如果选择了*应用于所有存储分段*(默认)、则此规则将应用于所有S3存储分段。

. 对于S3租户、可选择*是*以仅将此规则应用于已启用版本控制的S3存储分段中的较早对象版本。
+
如果您选择*Yes*，将自动为中的参考时间选择“非当前时间”link:create-ilm-rule-define-placements.html["创建ILM规则向导的第2步"]。

+

NOTE: 非当前时间仅适用于启用了版本控制的分段中的S3对象。请参阅link:../s3/operations-on-buckets.html["存储分段操作、PutBucketVersioning"]和link:managing-objects-with-s3-object-lock.html["使用 S3 对象锁定管理对象"]。

+
您可以使用此选项通过筛选非当前对象版本来减少受版本控制的对象的存储影响。请参阅。 link:example-4-ilm-rules-and-policy-for-s3-versioned-objects.html["示例 4 ： S3 版本对象的 ILM 规则和策略"]

. (可选)选择*添加高级筛选器*以指定其他筛选器。
+
如果不配置高级筛选、则规则适用场景 all objects that match the Basic Filters.有关高级筛选的详细信息，请参见<<在 ILM 规则中使用高级筛选器>>和<<指定多个元数据类型和值>>。

. 选择 * 继续 * 。link:create-ilm-rule-define-placements.html["第2步(定义放置位置)"]的创建ILM规则向导。




== 在 ILM 规则中使用高级筛选器

通过高级筛选功能，您可以创建仅根据特定对象的元数据应用于特定对象的 ILM 规则。为规则设置高级筛选时，您可以选择要匹配的元数据类型，选择运算符并指定元数据值。评估对象时， ILM 规则仅应用于元数据与高级筛选器匹配的对象。

下表显示了您可以在高级筛选器中指定的元数据类型，可用于每种元数据类型的运算符以及预期的元数据值。

[cols="1a,1a,2a"]
|===
| 元数据类型 | 支持的运算符 | 元数据值 


 a| 
载入时间
 a| 
* 为
* 不是
* 之前
* 已开启或早于
* 之后
* 开启或之后

 a| 
载入对象的时间和日期。

*注意：*为避免激活新ILM策略时出现资源问题、您可以在任何可能更改大量现有对象位置的规则中使用"Ingesg"时间高级筛选器。将"Inged Time (启动时间)"设置为大于或等于新策略生效的大致时间、以确保现有对象不会发生不必要的移动。



 a| 
密钥
 a| 
* 等于
* 不等于
* 包含
* 不包含
* 开头为
* 不以开头
* 结尾为
* 结尾不为

 a| 
唯一S3对象密钥的全部或部分。

例如，您可能希望匹配以结尾或以开头的 `test-object/`对象 `.txt`。



 a| 
上次访问时间
 a| 
* 为
* 不是
* 之前
* 已开启或早于
* 之后
* 开启或之后

 a| 
上次检索（读取或查看）对象的时间和日期。

*注意：*如果您计划link:using-last-access-time-in-ilm-rules.html["使用上次访问时间"]作为高级筛选器、则必须为S3存储分段启用上次访问时间更新。



 a| 
位置限制(仅限S3)
 a| 
* 等于
* 不等于

 a| 
创建 S3 存储分段的区域。使用 * ILM * > * 区域 * 定义显示的区域。

*注意：* us-east-1 的值将匹配在 us-east-1 区域创建的存储桶中的对象以及未指定区域的存储桶中的对象。看link:configuring-regions-optional-and-s3-only.html["配置 S3 区域"] 。



 a| 
对象大小
 a| 
* 等于
* 不等于
* 小于
* 小于或等于
* 大于
* 大于或等于

 a| 
对象的大小。

纠删编码最适合大于 1 MB 的对象。不要对小于200 KB的对象使用纠删编码、以避免管理非常小的经过纠删编码的片段所产生的开销。



 a| 
用户元数据
 a| 
* 包含
* 结尾为
* 等于
* exists
* 开头为
* 不包含
* 结尾不为
* 不等于
* 不存在
* 不以开头

 a| 
键值对，其中*User metadata"是键，*Metadata"是值。

例如，要按用户元数据为的对象进行筛选 `color=blue`，请为*用户元数据名称*、 `equals`运算符和 `blue`*元数据值*指定 `color`。

*注意：*用户元数据名称不区分大小写；用户元数据值区分大小写。



 a| 
对象标记(仅限S3)
 a| 
* 包含
* 结尾为
* 等于
* exists
* 开头为
* 不包含
* 结尾不为
* 不等于
* 不存在
* 不以开头

 a| 
键值对，其中*Object tag name*是键，*Object tag value*是值。

例如，要筛选对象标记为的对象 `Image=True`，请指定 `Image`*Object tag name*、运算符和*Object tag value* `equals`。 `True`

* 注： * 对象标记名称和对象标记值区分大小写。您必须严格按照为对象定义的方式输入这些项。

|===


== 指定多个元数据类型和值

定义高级筛选时，您可以指定多种类型的元数据和多个元数据值。例如，如果希望规则匹配大小介于10 MB到100 MB之间的对象，则应选择*Object Size*元数据类型并指定两个元数据值。

* 第一个元数据值用于指定大于或等于 10 MB 的对象。
* 第二个元数据值用于指定小于或等于 100 MB 的对象。


image::../media/advanced_filtering_size_between.png[对象大小的高级筛选示例]

使用多个条目可以精确控制匹配的对象。在以下示例中、规则适用场景对象使用品牌A或品牌B作为摄像机类型用户元数据的值。但是，规则仅对小于 10 MB 的品牌 B 对象执行适用场景 。

image::../media/advanced_filtering_multiple_rows.png[用户元数据的高级筛选示例]
