---
permalink: ilm/configuring-regions-optional-and-s3-only.html 
sidebar: sidebar 
keywords: S3 regions, region, ilm rules 
summary: ILM 规则可以根据创建 S3 存储桶的可选区域过滤对象，从而允许您将来自不同区域的对象存储在不同的存储位置。 
---
= 为StorageGRID配置 S3 区域
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM 规则可以根据创建 S3 存储桶的可选区域过滤对象，从而允许您将来自不同区域的对象存储在不同的存储位置。

如果要在规则中使用 S3 分段区域作为筛选器，则必须先创建可由系统中的分段使用的区域。


NOTE: 创建存储分段后、您不能更改存储分段的区域。

.开始之前
* 您已使用登录到网格管理器link:../admin/web-browser-requirements.html["支持的 Web 浏览器"]。
* 您拥有 link:../admin/admin-group-permissions.html["特定访问权限"]。


.关于此任务
创建 S3 存储分段时，您可以指定在特定区域创建存储分段。通过指定区域，存储分段可以在地理位置上靠近用户，从而有助于优化延迟，最大限度地降低成本并满足法规要求。

创建 ILM 规则时，您可能需要使用与 S3 存储分段关联的区域作为高级筛选器。例如、您可以设计一个仅适用于在区域中创建的S3存储分段中的对象的规则 `us-west-2`。然后，您可以指定将这些对象的副本放置在该区域内数据中心站点的存储节点上，以优化延迟。

配置区域时，请遵循以下准则：

* 默认情况下、所有存储分段均视为属于该 `us-east-1`区域。
* 您必须先使用网格管理器创建区域，然后才能在使用租户管理器或租户管理 API 创建存储桶时指定非默认区域，或者使用 S3 PUT Bucket API 请求的 LocationConstraint 请求元素指定非默认区域。如果 PUT Bucket 请求使用StorageGRID中未定义的区域，则会发生错误。
* 创建 S3 存储分段时，必须使用确切的区域名称。区域名称区分大小写。有效字符包括数字，字母和连字符。
+

NOTE: EU 不被视为 eu-west-1 的别名。如果您想使用 EU 或 eu-west-1 区域，则必须使用准确的名称。

* 如果某个区域在分配给任何策略(活动或非活动)的规则中使用、则无法删除或修改该区域。
* 如果在ILM规则中使用无效区域作为高级筛选器、则无法将该规则添加到策略中。
+
如果您在 ILM 规则中使用某个区域作为高级过滤器但后来删除了该区域，或者您使用网格管理 API 创建规则并指定了未定义的区域，则可能会导致区域无效。

* 如果在使用某个区域创建 S3 存储分段后将其删除，则如果您要使用位置限制高级筛选器查找该存储分段中的对象，则需要重新添加该区域。


.步骤
. 选择 * ILM * > * 区域 * 。
+
出现“区域”页面。

. 选择“*所有区域*”或“*默认区域*”选项卡。
+
[role="tabbed-block"]
====
.所有地区
--
*所有区域*选项卡列出了当前定义的区域，包括定义的默认区域。


NOTE: 您无法删除或修改“所有区域”选项卡中的默认区域。使用“默认区域”选项卡来更改默认区域。

.. 要添加区域，请选择“添加另一个区域”。
.. 输入要在创建 S3 存储分段时使用的区域名称。
+
在创建相应的 S3 存储分段时，您必须使用此确切的区域名称作为 LocationConstraint 请求元素。

.. 要删除未使用的区域，请选择删除图标image:../media/icon-x-to-remove.png["删除图标"]。
+
如果您尝试删除当前在任何策略(活动或非活动)中使用的区域、则会显示一条错误消息。

.. 完成更改后，选择 * 保存 * 。
+
现在、您可以从创建ILM规则向导的步骤1中的高级筛选器部分选择这些区域。请参阅。 link:create-ilm-rule-enter-details.html#use-advanced-filters-in-ilm-rules["在 ILM 规则中使用高级筛选器"]



--
.默认区域
--
*默认区域*选项卡显示当前定义的默认区域，您可以修改它。

.. 要更改默认区域，请从“*默认区域*”下拉列表中的可用选项中选择区域名称。
.. 选择 * 保存 * 。


--
====

